# Concept

### Tables, Items, Attributes

**Table** 表:
* 一組資料記錄，如一個「用戶」表來儲存有關用戶的數據，以及一個「訂單」表來儲存有關用戶訂單的數據
* 類似於關聯式資料庫中的表或MongoDB中的集合


**Item** 項目:
* 表中的單一資料記錄，表中的每個項目都由表中規定的主鍵唯一標識
* 在您的使用者表中，一個項目將是一個特定的使用者
* 項目類似於關聯式資料庫中的一行或 MongoDB 中的文件

**Attributes** 屬性:
* 附加到單一項目的資料片段，可以是儲存使用者年齡的簡單年齡屬性
* 屬性相當於關聯式資料庫中的列或 MongoDB 中的欄位
* 除了構成主鍵的屬性外，DynamoDB 可以不需要任何的屬性 

### Primary Key 主鍵

表中的每個項目都由主鍵唯一標識。
* 主鍵定義必須在建立 **Table** 時定義
* 插入新 **Item** 時必須提供主鍵

**Primary Key** 分成兩種類型 **simple primary key** 簡單主鍵、 **composite primary key** 複合主鍵

**simple primary key**: 類似於 Memcached 等標準鍵值儲存或透過主鍵存取 SQL 表中的行
**composite primary key**: 可以指定分區鍵和排序鍵，排序鍵用於（等待）對具有相同分區的項目進行排序
* 用於記錄電子商務網站上的客戶訂單的訂單表。分區鍵是 CustomerId，排序鍵是 OrderId
* 複合主鍵支援複雜的查詢模式，包括使用給定分區鍵抓取所有項目或使用排序鍵縮小特定查詢的相關項目範圍

### Secondary Indexes 二級索引

DynamoDB 通常使用主鍵對表進行查詢，但有時應用的訪問模式對於主鍵的查詢效率來說不是很好。
* 使用**二級索引**的概念來支援這些額外的存取模式

二級索引分為 **local secondary index** 局部二級索引、 **global secondary index** 全域二級索引 兩種。
* **local secondary index**: 使用與基礎表相同的分區鍵，但使用不同的排序鍵
  * 假設您希望按照客戶在訂單上花費的金額的降序快速訪問客戶的訂單，您可以添加一個本地二級索引，其分區鍵為 CustomerId，排序鍵為 Amount，從而允許按金額高效查詢客戶的訂單
* **global secondary index**: 可以為表定義完全不同的主鍵，可能意味著為具有複合主鍵的表設置僅具有分區鍵的索引，也可能意味著使用完全不同的屬性來填充分區鍵和排序鍵

二級索引是一個複雜的主題，但對於充分利用 DynamoDB 非常有用。 

### Read and Write Capacity

使用 MySQL、Postgres 或 MongoDB 等資料庫時，需要預置特定伺服器來運行資料庫。您需要選擇實體大小 -- 您需要多少個 CPU、多少 RAM、多少 GB 的儲存空間等。

但 DynamoDB 並非如此。而是預置讀取和寫入容量單位。這些單元允許每秒執行給定數量的操作。這與基於實例的世界有著根本的不同於此 -- 定價可以更接近地反映實際使用方式。

DynamoDB 還具有讀取和寫入容量單位的自動擴展功能。這樣可以更輕鬆地在高峰時段擴展應用程式，同時通過在使用者睡眠時縮減來節省資金。

